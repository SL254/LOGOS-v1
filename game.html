<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LOGOS ORGANON</title>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <button id="emergency-exit-tutorial-btn" class="hidden"></button>
    <audio id="main-menu-music" src="assets/sounds/main_theme.flac"></audio>
    <audio
      id="character-select-music"
      src="assets/sounds/char_select_theme.flac"
    ></audio>
    <audio id="game-play-music" src="assets/sounds/game_music.wav"></audio>
    <audio
      id="thinking-time-music"
      src="assets/sounds/thinking_music.wav"
    ></audio>
    <!-- Language Selection Modal -->
    <div id="background-box"></div>
    <div id="background-box_1"></div>
    <div id="bottom-overlay-box"></div>
    <div id="character-select-indicator" class="turn-indicator hidden"></div>
    <div id="language-modal" class="modal hidden">
      <div class="modal-content-small">
        <h2>Choose Language / 언어 선택</h2>
        <div id="language-buttons" class="selection-buttons">
          <button id="lang-en">English</button>
          <button id="lang-ko">한국어</button>
        </div>
      </div>
    </div>

    <div id="character-selection-screen" class="hidden">
      <button
        id="back-to-main-from-char-select-btn"
        class="close-button"
      ></button>
      <div class="player-display-area" id="p1-display">
        <div class="portrait-area" id="p1-portrait"></div>
        <div class="philosopher-name" id="p1-philosopher-name"></div>
        <div class="skill-area" id="p1-skill">
          <h3 class="skill-title" id="p1-skill-title"></h3>
          <p id="p1-skill-desc"></p>
        </div>
        <div class="ready-overlay" id="p1-ready-overlay">READY</div>
      </div>

      <div class="shared-selection-area">
        <div class="char-grid" id="shared-char-grid"></div>
        <button id="confirm-selection-btn" disabled></button>
      </div>

      <div class="player-display-area" id="p2-display">
        <div class="portrait-area" id="p2-portrait"></div>
        <div class="philosopher-name" id="p2-philosopher-name"></div>
        <div class="skill-area" id="p2-skill">
          <h3 class="skill-title" id="p2-skill-title"></h3>
          <p id="p2-skill-desc"></p>
        </div>
        <div class="ready-overlay" id="p2-ready-overlay">READY</div>
      </div>
    </div>

    <div id="turn-order-modal" class="modal">
      <div class="modal-content-small">
        <h2 id="turn-order-title"></h2>
        <div id="turn-order-buttons" class="selection-buttons">
          <button id="select-first-player"></button>
          <button id="select-second-player"></button>
        </div>
      </div>
    </div>

    <div class="container" id="container">
      <header>
        <h1 id="main-title">LOGOS ORGANON</h1>
      </header>

      <div id="info-box">
        <div class="header-buttons-left">
          <button id="new-game-btn"></button>
          <button id="credits-btn" class="hidden"></button>
          <button id="proof-review-btn" class="hidden"></button>
        </div>
        <div class="round-display" id="round-display"></div>
        <div class="header-buttons-right">
          <button id="main-menu-btn"></button>
          <button id="fullscreen-btn"></button>
          <button id="settings-btn"></button>
        </div>
      </div>

      <div class="player-area" id="player-a-area">
        <div class="player-title-box">
          <h3 id="player-a-title"></h3>
        </div>

        <div id="player-a-portrait" class="philosopher-portrait"></div>
        <div class="hand" id="player-a-hand"></div>
        <div class="button-wrapper">
          <button class="ability-btn" id="ability-a"></button>
          <button class="eureka-btn" id="eureka-a"></button>
        </div>
      </div>

      <div class="game-board">
        <div class="main-center-bg">
          <img
            id="main-menu-title-img"
            src="assets/images/title.png"
            alt="Logos Title"
          />
          <div id="press-any-key" class="press-any-key-screen">
            <h2 id="press-any-key-text">Press any key or click to start</h2>
          </div>
          <div class="main-center-buttons invisible">
            <div class="mode-selector">
              <button id="vs-player-btn"></button>
              <button id="vs-ai-btn"></button>
              <button id="vs-ai-test-btn">AI Test Mode</button>
              <button id="vs-ai-battle-btn"></button>
            </div>

            <button id="puzzle-mode-btn"></button>
            <button id="tutorial-btn"></button>
            <button id="tutorial-puzzle-btn"></button>
            <button id="exit-game-btn"></button>
            <div id="mode-description"></div>
          </div>
        </div>

        <div id="current-proposition">
          <h3 id="current-proposition-title"></h3>
          <div id="proposition-display"></div>
          <div id="proposition-controls">
            <button id="complete-btn"></button>
            <button id="undo-btn"></button>
            <button id="end-turn-btn"></button>
          </div>
        </div>
        <div class="true-propositions-wrapper">
          <div id="true-propositions">
            <h3 id="true-propositions-title"></h3>
            <ul id="true-list"></ul>
          </div>

          <div id="thinking-time-controls" class="hidden">
            <h2 id="thinking-time-title"></h2>
            <p id="thinking-time-desc"></p>
          </div>
        </div>
      </div>

      <div class="player-area" id="player-b-area">
        <div class="player-title-box">
          <h3 id="player-b-title"></h3>
        </div>

        <div id="player-b-portrait" class="philosopher-portrait"></div>
        <div class="hand" id="player-b-hand"></div>
        <div class="button-wrapper">
          <button class="ability-btn" id="ability-b"></button
          ><button class="eureka-btn" id="eureka-b"></button>
        </div>
      </div>

      <div class="status-bar" id="status"></div>
    </div>

    <div id="character-selection-screen" class="hidden">
      <div class="player-display-area" id="p1-display">
        <div class="portrait-area" id="p1-portrait"></div>
        <div class="skill-area" id="p1-skill">
          <h3>스킬 설명</h3>
          <p id="p1-skill-desc"></p>
        </div>
      </div>

      <div class="shared-selection-area">
        <div class="char-grid" id="shared-char-grid"></div>
        <button id="confirm-selection-btn" disabled></button>
      </div>

      <div class="player-display-area" id="p2-display">
        <div class="portrait-area" id="p2-portrait"></div>
        <div class="skill-area" id="p2-skill">
          <h3>스킬 설명</h3>
          <p id="p2-skill-desc"></p>
        </div>
      </div>
    </div>

    <!-- Main Eureka Modal -->
    <div id="eureka-modal" class="modal">
      <div class="modal-content">
        <button class="close-button" id="close-eureka-modal-btn"></button>
        <h2 id="eureka-title"></h2>

        <div id="workbench-controls">
          <select id="inference-rule-select"></select>
          <button id="apply-rule-btn"></button>
          <button id="add-assumption-btn"></button>
          <button id="cancel-assumption-btn"></button>
        </div>

        <div id="conclusion-preview">
          <h3 id="conclusion-preview-title"></h3>
          <div id="conclusion-preview-text"></div>
        </div>

        <div class="proof-container">
          <div class="premise-selection">
            <h3 id="premise-selection-title"></h3>
            <ul id="premise-list"></ul>
          </div>
        </div>
        <button id="modal-confirm-btn"></button>
      </div>
    </div>

    <div id="ability-modal" class="modal">
      <div class="modal-content">
        <button class="close-button" id="close-ability-modal-btn"></button>
        <h2 id="ability-title"></h2>
        <div class="premise-selection" id="ability-premise-selection">
          <ul id="ability-list"></ul>
        </div>
        <div class="modal-buttons">
          <button id="ability-confirm-btn"></button>
        </div>
      </div>
    </div>

    <div id="kant-ability-modal" class="modal">
      <div class="modal-content">
        <button class="close-button" id="close-kant-modal-btn"></button>
        <h2 id="kant-ability-title"></h2>

        <div id="kant-proposition-area">
          <h3 id="kant-current-proposition-title">구성중인 명제</h3>
          <div id="kant-proposition-display"></div>
        </div>

        <div id="kant-controls">
          <button id="kant-undo-btn"></button>
          <button id="kant-confirm-btn"></button>
        </div>

        <div id="kant-hand-area">
          <h3 id="kant-hand-title">사용 가능한 카드</h3>
          <div id="kant-hand-display"></div>
        </div>
      </div>
    </div>

    <!-- Tutorial Modal (previously Rules Modal) -->
    <div id="tutorial-modal" class="modal">
      <div class="modal-content">
        <button class="close-button" id="close-tutorial-modal-btn"></button>
        <h2 id="tutorial-modal-title"></h2>
        <div id="tutorial-content">
          <!-- Tutorial content will be generated here by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Custom Alert Modal -->
    <div id="alert-modal" class="modal">
      <div class="modal-content-small">
        <p id="alert-message"></p>
        <div class="modal-buttons">
          <button id="alert-ok-btn"></button>
        </div>
      </div>
    </div>

    <!-- Custom Prompt Modal -->
    <div id="prompt-modal" class="modal">
      <div class="modal-content-small">
        <p id="prompt-message"></p>
        <input type="text" id="prompt-input" />
        <div class="modal-buttons">
          <button id="prompt-confirm-btn"></button>
          <button id="prompt-cancel-btn"></button>
        </div>
      </div>
    </div>

    <!-- Tutorial Guide UI -->
    <div id="tutorial-guide" class="hidden">
      <p id="tutorial-text"></p>
      <button id="tutorial-next-btn"></button>
    </div>

    <div id="puzzle-goal-box" class="hidden">
      <p id="puzzle-goal-text"></p>
    </div>

    <div id="ai-turn-summary-modal" class="modal">
      <div class="modal-content-small">
        <h2 id="ai-summary-title"></h2>
        <div id="ai-summary-content"></div>
        <div class="modal-buttons">
          <button id="ai-summary-ok-btn"></button>
        </div>
      </div>
    </div>

    <div id="settings-modal" class="modal">
      <div class="modal-content-small">
        <button class="close-button" id="close-settings-modal-btn"></button>
        <h2 id="settings-title"></h2>
        <div class="settings-group">
          <label for="bgm-volume-slider" id="bgm-label"></label>
          <input
            type="range"
            id="bgm-volume-slider"
            min="0"
            max="1"
            step="0.05"
          />
          <span id="bgm-volume-value">50%</span>
        </div>
        <div class="settings-group">
          <label for="sfx-volume-slider" id="sfx-label"></label>
          <input
            type="range"
            id="sfx-volume-slider"
            min="0"
            max="1"
            step="0.05"
          />
          <span id="sfx-volume-value">100%</span>
        </div>
        <div class="settings-group">
          <label for="language-select" id="language-label">언어 / Language</label>
          <select id="language-select">
            <option value="ko">한국어</option>
            <option value="en">English</option>
          </select>
        </div>
      </div>
    </div>

    <div id="credits-modal" class="modal">
      <div class="modal-content">
        <button class="close-button" id="close-credits-modal-btn"></button>
        <h2 id="credits-title"></h2>
        <div
          id="credits-content"
          style="
            text-align: left;
            margin-top: 15px;
            line-height: 1.7;
            font-size: 14px;
            max-height: 50vh;
            overflow-y: auto;
            padding-right: 15px;
          "
        >
          <p><strong>Game Design & Development</strong><br />Shin Jeonghyeon</p>

          <p><strong>Graphics</strong><br />Shin Jeonghyeon, Lee Joeun</p>

          <hr
            style="border: 0; border-top: 1px solid #d3b88b; margin: 15px 0"
          />

          <p><strong>SFX</strong></p>
          <p>
            <i>"Menu Selection Click"</i><br />
            Sound by NenadSimic<br />
            Licensed under CC BY 3.0<br />
            <a
              href="https://opengameart.org/content/menu-selection-click"
              target="_blank"
              rel="noopener noreferrer"
              >opengameart.org</a
            >
          </p>

          <p><strong>Music</strong></p>
          <p>
            <i>"Contemplation" & "Contemplation 2 (Variation) & Another Me"</i
            ><br />
            Music by Estúdio Cafofo<br />
            Licensed under CC BY 3.0<br />
            <a
              href="http://estudiocafofo.com"
              target="_blank"
              rel="noopener noreferrer"
              >estudiocafofo.com</a
            ><br />
            <a
              href="https://opengameart.org/content/unreleased-game-music-pack"
              target="_blank"
              rel="noopener noreferrer"
              >opengameart.org</a
            >
          </p>

          <p>
            <i>"Briefing Theme"</i><br />
            Music by Alexandr Zhelanov<br />
            Licensed under CC BY 3.0<br />
            <a
              href="https://soundcloud.com/alexandr-zhelanov"
              target="_blank"
              rel="noopener noreferrer"
              >soundcloud.com</a
            ><br />
            <a
              href="https://opengameart.org/content/unused-music"
              target="_blank"
              rel="noopener noreferrer"
              >opengameart.org</a
            >
          </p>

          <p>
            <i>"Fanfare"</i><br />
            Music by Ted Kerr (2015)<br />
            Licensed under CC BY 3.0<br />
            <a
              href="https://opengameart.org/content/fanfare-0"
              target="_blank"
              rel="noopener noreferrer"
              >opengameart.org</a
            >
          </p>

          <p><strong>Font</strong></p>
          <p>
            Pretendard © 2021 Kil Hyung-jin<br />
            Licensed under SIL Open Font License 1.1<br />
            <a
              href="https://github.com/orioncactus/pretendard"
              target="_blank"
              rel="noopener noreferrer"
              >github.com/orioncactus/pretendard</a
            >
          </p>

          <hr
            style="border: 0; border-top: 1px solid #d3b88b; margin: 15px 0"
          />

          <p>Developed by maemgames, 2025</p>
        </div>
      </div>
    </div>

    <div id="puzzle-level-select-modal" class="modal">
      <div class="shared-selection-area">
        <button class="close-button" id="close-puzzle-modal-btn"></button>
        <h2 id="puzzle-modal-title"></h2>
        <div id="puzzle-level-grid"></div>
      </div>
    </div>

    <!-- Proof Review Modal -->
    <div id="proof-review-modal" class="modal">
      <div class="modal-content">
        <button class="close-button" id="close-proof-review-modal-btn"></button>
        <h2 id="proof-review-title"></h2>
        <div id="proof-review-content">
          <!-- Proof steps will be displayed here -->
        </div>
      </div>
    </div>

    <script src="languages.js"></script>
    <script src="philosophers.js"></script>
    <script src="audio.js"></script>
    <script src="game-logic.js"></script>

    <script src="eureka-modal.js"></script>

    <script src="ai_logic.js"></script>
    <script src="tutorial.js"></script>
    <script src="puzzle.js"></script>
    <script src="character-selection.js"></script>

    <script src="ui-utils.js"></script>
    <script src="settings.js"></script>

    <script src="events.js"></script>
    <script src="script.js"></script>
  </body>
</html>
